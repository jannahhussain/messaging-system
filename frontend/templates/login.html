<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Messaging App</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <!-- Navigation Bar -->
    <nav>
        <div class="logo">
            <h2>Messaging App</h2>
        </div>
    </nav>

    <!-- Login Form -->
    <div class="container">
        <div class="login-box">
            <h2>Login</h2>
            <form action="{{ url_for('user_auth_bp.login') }}" method="POST">
                <!-- Username Field -->
                <div class="input-container">
                    <label for="username">Username:</label>
                    <input type="text" id="username" name="username" placeholder="Enter your username" required>
                    <div id="username-error" class="error-message" style="display:none;">Please enter a username</div>
                </div>

                <!-- Password Field -->
                <div class="input-container">
                    <label for="password">Password:</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required>
                    <div id="password-error" class="error-message" style="display:none;">Please enter a password</div>
                </div>

                <!-- Error Message for Login Failure -->
                <div id="login-error" class="error-message" style="display:none;">
                    Invalid username or password. Please try again.
                </div>

                <!-- Submit Button -->
                <div class="input-container">
                    <button type="submit">Login</button>
                </div>
            </form>

            <!-- Links for Register & Forgot Password -->
            <div class="links">
                <p>Don't have an account? <a href="{{ url_for('user_auth_bp.register') }}">Create Account</a></p>
                <p><a href="{{ url_for('user_auth_bp.forgot_password') }}">Forgot Password?</a></p>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Handle form submission
        const form = document.querySelector('form');
        form.addEventListener('submit', function (event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Client-side validation
            let valid = true;
            if (!username) {
                document.getElementById('username-error').style.display = 'block';
                valid = false;
            } else {
                document.getElementById('username-error').style.display = 'none';
            }

            if (!password) {
                document.getElementById('password-error').style.display = 'block';
                valid = false;
            } else {
                document.getElementById('password-error').style.display = 'none';
            }

            if (valid) {
                // Submit form if valid
                form.submit();
            } else {
                document.getElementById('login-error').style.display = 'none'; // Hide error if form is valid
            }
        });
    </script>

</body>

</html>
